%!TEX encoding =  IsoLatin
\input{../../common/exo_begin.tex}%

\ifx\ifnotellipse\undefined
\newcommand{\ifnotellipse}[1]{}
\fi

\firstpassagedo{
\huge TD not�, rattrapage 2009

\normalsize

\textit{Le programme construit au fur et � mesure des questions devra �tre imprim� � la fin du TD et rendu. Toutes les questions valent 3~points sauf la premi�re et la derni�re qui valent 1~point. Tout document autoris�.} \medskip
}




\exosubject{}
\begin{xexercicenot}\label{td_note_rattrapage2009}%\indexfrr{�nonc�}{pratique}

Cet exercice propose de fusionner des donn�es provenant de deux sources. La premi�re �tape consiste � t�l�charger deux fichiers disponibles � l'adresse suivante~: ???

\begin{center}
\url{td\_note\_2009\_cluedo\_1.txt} et \url{td\_note\_2009\_cluedo\_2.txt}.
\end{center}

Il est pr�f�rable de placer ces pi�ces jointes dans le m�me r�pertoire que le progamme lui-m�me. Le premier fichier contient une matrice dont chaque ligne contient 4~informations s�par�es par des tabulations~:

\vspace{-0.15cm}
\begin{center}\begin{tabular}{llll}
un nom & un pr�nom & une couleur & une arme
\end{tabular}\end{center}
\vspace{-0.15cm}

Les premi�res lignes sont les suivantes\footnote{Ces donn�es sont compl�tement al�atoires.}~:
\vspace{-0.15cm}
\begin{verbatimx}
N10   P10   gris     corde
N15   P15   rouge    chandelier
N8    P8    marron   fer � cheval
\end{verbatimx}
\vspace{-0.15cm}

Le second fichier contient une matrice dont chaque ligne contient 3~informations s�par�es par des tabulations~:

\vspace{-0.15cm}
\begin{center}\begin{tabular}{lll}
un nom & un pr�nom & une pi�ce
\end{tabular}\end{center}
\vspace{-0.15cm}

Les premi�res lignes sont les suivantes\footnote{Ces donn�es sont aussi compl�tement al�atoires.}~:
\vspace{-0.15cm}
\begin{verbatimx}
N3    P3    cuisine
N19   P19   bureau
N20   P20   salle � manger
\end{verbatimx}
\vspace{-0.15cm}

Certaines �l�ves sont pr�sents dans les deux fichiers, l'objectif de cet exercice et de construire un troisi�me fichier regroupant les informations concernant les �l�ves pr�sents dans les deux fichiers. Ce fichier contiendra donc 5~colonnes.

\exequest Construire une fonction qui prend comme argument un nom de fichier et qui retourne le contenu du fichier dans une matrice (une liste de listes).
\vspace{-0.15cm}
\begin{verbatimx}
def convertit_fichier_en_matrice (fichier) :
...
\end{verbatimx}

\exequest Construire une fonction qui prend comme entr�e une matrice et qui construit un dictionnaire dont~:
\begin{itemize}
\item la cl� est un tuple compos� des valeurs des deux premi�res colonnes (nom, pr�nom)
\item la valeur est la liste des valeurs des autres colonnes
\end{itemize}
\vspace{-0.15cm}

\begin{verbatimx}
def convertit_matrice_en_dictionnaire (matrice) :
...
\end{verbatimx}

\exequest Construire une fonction qui effectue la fusion de deux dictionnaires. Le dictionnaire r�sultant v�rifie~:
\begin{itemize}
\item chaque cl� est pr�sente dans les deux dictionnaires � la fois
\item la valeur associ�e � une cl� est la somme des deux listes associ�es � cette m�me cl� dans chacun des deux dictionnaires.
\end{itemize}
\vspace{-0.15cm}

\begin{verbatimx}
def fusion_dictionnaire (dico1, dico2) :
\end{verbatimx}
\vspace{-0.15cm}


\exequest Construire une fonction qui convertit un dictionnaire en matrice. C'est la fonction r�ciproque de la fonction de la question~2. Les deux premi�res colonnes sont celles de la cl�, les suivantes sont celles des valeurs.
\vspace{-0.15cm}

\begin{verbatimx}
def convertit_dictionnaire_en_matrice (dico) :
\end{verbatimx}
\vspace{-0.15cm}

\exequest Ecrire une fonction qui �crit une matrice dans un fichier texte.
\vspace{-0.15cm}

\begin{verbatimx}
def convertit_matrice_en_fichier (mat, fichier) :
\end{verbatimx}
\vspace{-0.15cm}

\exequest En utilisant toutes les fonctions pr�c�dentes, �crire une fonction qui effectue la fusion de deux fichiers et qui �crit le r�sultat dans un autre fichier.
\vspace{-0.15cm}

\begin{verbatimx}
def fusion_fichier (fichier1, fichier2, fichier_resultat) :
\end{verbatimx}
\vspace{-0.15cm}

\exequest En vous inspirant du sch�ma propos� dans les pr�c�dentes questions, il s'agit ici de produire un troisi�me fichier qui contient tous les couples (nom, pr�nom) qui sont pr�sents dans un fichier mais pas dans les deux � la fois.

\vspace{-0.15cm}
\begin{verbatimx}
def union_moins_intersection_fichier (fichier1, fichier2, fichier_resultat) :
\end{verbatimx}

\exequest Serait-il compliqu� d'�crire une fonction qui permette de fusionner 3~fichiers~? $n$~fichiers~? Justifier.

\textbf{A quoi �a sert~:} cette op�ration de fusion peut �tre effectu�e sous Excel lorsque la taille des fichiers n'exc�de pas 65000 lignes. Au del�, cet �nonc� propose un moyen de fusionner des fichiers de plusieurs millions de lignes.

\end{xexercicenot}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\ifnum\correctionenonce = 1

\begin{xdemoexonot}{td_note_rattrapage2009}

\bigskip
\inputcodes{../python_examen/ecrit_2009_rattrapage.py}{exercice pour s'�valuer}{, correction 2009}
\vspaceneg

\end{xdemoexonot}
\fi

\input{../../common/exo_end.tex}%
