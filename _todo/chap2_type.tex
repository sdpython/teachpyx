\input{../../common/livre_begin.tex}%
\firstpassagedo{\input{python_cours_titre.tex}}
\input{../../common/livre_table_begin.tex}%
%\firstpassagedo{\input{python_cours_chapter.tex}}





%-------------------------------------------------------------------------------------------------------------
\chapter{Types et variables du langage \python}  \label{chapter_variables_refo}
% nombre, booléen, complexe, T-uple, chaîne de caractères
%-------------------------------------------------------------------------------------------------------------

\section{Variables}

Il est impossible d'écrire un programme sans utiliser de variable. Ce terme désigne le fait d'attribuer un nom ou identificateur à des informations~: en les nommant, on peut manipuler ces informations beaucoup plus facilement. L'autre avantage est de pouvoir écrire des programmes valables pour des valeurs qui varient~: on peut changer la valeur des variables, le programme s'exécutera toujours de la même manière et fera les mêmes types de calculs quelles que soient les valeurs manipulées. Les variables jouent un rôle semblable aux inconnues dans une équation mathématique. 

L'ordinateur ne sait pas faire l'addition de plus de deux nombres mais cela suffit à calculer la somme de $n$~premiers nombres entiers. Pour cela, il est nécessaire de créer une variable intermédiaire qu'on appellera par exemple \codes{somme} de manière à conserver le résultat des sommes intermédiaires.
%
\indexexemples{somme}{}
\vspaceneg
\begin{verbatimx}
somme = 0                   # initialisation : la somme est nulle 
for i in range(1,n) :       # pour tous les indices de 1 à n exclu
    somme = somme + i       # on ajoute le i ème élément à somme
\end{verbatimx}			
\vspaceneg	
%
		\begin{xdefinition}{variable}\indexfr{identificateur}\indexfr{type}
		\indexfrr{variable}{identificateur}\indexfrr{variable}{type}
		Une variable est caractérisée par~:
 			\begin{description}
 			\item[un identificateur :] 	il peut contenir des lettres, des chiffres, des blancs soulignés 
 												mais il ne peut commencer par un chiffre. Minuscules et majuscules
 												sont différenciées. Il est aussi unique.
			\item[un type :]	c'est une information sur le contenu de la variable
												qui indique à l'interpréteur \pythons la manière de manipuler cette information.
			\end{description}
			%Le contenu de la variable est ce qu'on appelle un \textit{objet}.\indexfr{objet}
		\end{xdefinition}

Comme le typage est dynamique en \python, le type n'est pas précisé explicitement, il est implicitement liée à l'information manipulée. Par exemple, en écrivant, \codes{x = 3.4}, on ne précise pas le type de la variable \codes{x} mais il est implicite car \codes{x} reçoit une valeur réelle~: \codes{x} est de type réel ou \codes{float} en \python. Pour leur première initialisation, une variable reçoit dans la plupart des cas une constante~:

		\begin{xdefinition}{constante}
		Les constantes sont le contraire des variables, ce sont toutes les valeurs numériques, 
		chaînes de caractères, ..., tout ce qui n'est pas désigné par un nom. Les constantes possèdent un type
		mais pas d'identificateur.
		\end{xdefinition}
		
\indexfr{types fondamentaux}
Le langage \pythons possède un certain nombre de types de variables déjà définis ou types fondamentaux à partir desquels il sera possible de définir ses propres types (voir chapitre~\ref{chap_classe}). Au contraire de langages tels que le~\textit{C}, il n'est pas besoin de déclarer une variable pour signifier qu'elle existe, il suffit de lui affecter une valeur. Le type de la variable sera défini par le type de la constante qui lui est affectée. Le type d'une variable peut changer, il correspond toujours au type de la dernière affectation.
%
%
\vspaceneg
\begin{verbatimx}
x   = 3.5      # création d'une variable nombre réel appelée x initialisée à 3.5
               # 3.5 est un réel, la variable est de type "float"
sc = "chaîne"  # création d'une variable chaîne de caractères appelée str 
               # initialisée à "chaîne", sc est de type "str"
\end{verbatimx}
\vspaceneg
%
%
%
\begin{xremark}{commentaires}
Pour tous les exemples qui suivront, le symbole \codes{\#} apparaîtra à maintes reprises. Il marque le début d'un commentaire que la fin de la ligne termine. Autrement dit, un commentaire est une information aidant à la compréhension du programme mais n'en faisant pas partie comme dans l'exemple qui suit.\indexfr{commentaire}
\end{xremark}
\vspaceneg
%
\begin{verbatimx}
x = 3          # affectation de la valeur entière 3 à la variable x
y = 3.0        # affectation de la valeur réelle 3.0 à la variable y
\end{verbatimx}
\vspaceneg
%
%
%
\begin{xremark}{instruction sur plusieurs lignes}
Le \pythons impose une instruction par ligne. Il n'est pas possible d'utiliser deux lignes pour écrire une affectation à moins de conclure chaque ligne qui n'est pas la dernière par le symbole \codes{\backslash}.\indexsymbolmodif{\backslash} L'exemple suivant est impossible.
\vspaceneg
\begin{center}\begin{tabular}{@{}llr@{}}
\begin{minipage}{4.7cm}
\begin{verbatimx}
x = 
    5.5
\end{verbatimx}	
\end{minipage}
&
\begin{minipage}{4cm}
Il devrait être rédigé comme suit~:
\end{minipage}
&
\begin{minipage}{4.7cm}
\begin{verbatimx}
x =  \
    5.5
\end{verbatimx}	
\end{minipage}
\end{tabular}
\end{center}
\end{xremark}
%
Avec ce symbole, les longues instructions peuvent être écrites sur plusieurs lignes de manière plus lisibles, de sorte qu'elles apparaissent en entier à l'écran. Si le dernier caractère est une virgule, il est implicite.

Les paragraphes suivant énumèrent les types incontournables en \python. Ils sont classés le plus souvent en deux catégories~: types \textit{immuables} ou \textit{modifiables}. Tous les types du langage \pythons sont également des objets, c'est pourquoi on retrouve dans ce chapitre certaines formes d'écriture similaires à celles présentées plus tard dans le chapitre concernant les classes (chapitre~\ref{chap_classe}).




\section{Types immuables (ou \textit{immutable})}
\indextypenoc{immuable}\indextypenoc{immutable}\indextypenoc{modifiable}\indextypenoc{mutable}
\indexfr{immuable}\indexfr{modifiable}
\vspaceneg
			\begin{xdefinition}{type immuable (ou immutable)}
			Une variable de type immuable ne peut être modifiée. Une opération
			sur une variable de ce type entraîne nécessairement la création d'une autre 
			variable du même type, même si cette dernière est temporaire.
			\end{xdefinition}
			
Autrement dit, la simple instruction \texttt{x+=3} qui consiste à ajouter à la variable \codes{x} la valeur \codes{3} crée une seconde variable dont la valeur est celle de \codes{x} augmentée de \codes{3} puis à en recopier le contenu dans celui de la variable \codes{x}. Les nombres sont des types immuables tout comme les chaînes de caractères et les \codes{tuple} qui sont des tableaux d'objets. Il n'est pas possible de modifier une variable de ce type, il faut en recréer une autre du même type qui intègrera la modification.
			

\subsection{Type "rien"}
\indextype{None}\indextypenoc{rien}\indexfr{\codesindex{None}}
%
\pythons propose un type \codes{None} pour signifier qu'une variable ne contient rien. La variable est de type \codes{None} et est égale à \codes{None}.
\vspaceneg
\begin{verbatimx}
s = None
print s    # affiche None
\end{verbatimx}
\vspaceneg
Certaines fonctions\footnote{Les fonctions sont définies au paragraphe~\ref{par_fonction}, plus simplement, ce sont des mini-programmes~: elles permettent de découper un programme long en tâches plus petites. On les distingue des variables car leur nom est suivi d'une liste de constantes ou variables comprises entre parenthèses et séparées par une virgule.} utilisent cette convention lorsqu'il leur est impossible de retourner un résultat. Ce n'est pas la seule option pour gérer cette impossibilité~: il est possible de générer une exception\footnote{voir chapitre~\ref{chap_exception}}, de retourner une valeur par défaut ou encore de retourner \codes{None}. Il n'y a pas de choix meilleur, il suffit juste de préciser la convention choisie.




\subsection{Nombres réels et entiers}
\indextype{float}\indextype{int}\indexfrr{nombre}{réel}\indexfrr{nombre}{entier}\indextypenoc{réel}\indextypenoc{entier}
\label{type_nombre}\indexclass{int}\indexclass{float}
%
Il existe deux types de nombres en \python, les nombres réels (\codes{float}) et les nombres entiers (\codes{int}). L'instruction \texttt{x=3} crée une variable de type \codes{int} initialisée à \codes{3} tandis que \texttt{y=3.0} crée une variable de type \codes{float} initialisée à \codes{3.0}. Le programme suivant permet de vérifier cela en affichant pour les variables \codes{x} et \codes{y}, leurs valeurs et leurs types respectifs grâce à la fonction \codes{type}.\indexfonctionbis{type}

\begin{center}\begin{tabular}{@{}lr@{}}
\begin{minipage}{6.7cm}
\begin{verbatimx}
x = 3
y = 3.0
print "x =", x, type(x)
print "y =", y, type(y)
\end{verbatimx}
\end{minipage}
&
\begin{minipage}{6.7cm}
\begin{verbatimx}


x = 3 <type 'int'>
y = 3.0 <type 'float'>
\end{verbatimx}
\end{minipage}
\end{tabular}
\end{center}
%
La liste des opérateurs qui s'appliquent aux nombres réels et entiers suit ce paragraphe. Les trois premiers résultats s'expliquent en utilisant la représentation en base deux. \texttt{8 << 1} s'écrit en base deux \texttt{100 << 1 = 1000}, ce qui vaut 16 en base décimale~: les bits sont décalés vers la droite ce qui équivaut à multiplier par deux. De même, \codes{7 \& 2} s'écrit \codes{1011 \& 10 = 10}, qui vaut 2 en base décimale. Les opérateurs \codes{<<}, \codes{>>}, \codes{|}, \codes{\&} sont des opérateurs bit à bit, ils se comprennent à partir de la représentation binaire des nombres entiers.

%
			\indexsymbole{<<}\indexsymbole{>>}\indexsymbole{|}
			\indexsymbole{\&}
			\indexsymbole{+}
			\indexsymbole{-}\indexsymbole{+=}\indexsymbole{-=}\indexsymbole{*}\indexsymbole{/}
			\indexsymbole{*=}\indexsymbole{/=}\indexsymbole{**}
			\indexsymbole{\%}
			\begin{center}\begin{tabularx}{\textwidth}{|lXl|} \hline
			\textbf{opérateur}	&		\textbf{signification}											& \textbf{exemple} \\ \hline
			\codes{<<} \;  \codes{>>}	&		décalage à gauche, à droite				    &	\texttt{x = 8 << 1} 
																															\begin{footnotesize}(résultat = 16)\end{footnotesize}  \\ \hline
			| 	  							&		opérateur logique \textit{ou} bit à bit							& \codes{x = 8 | 1} 
																															\begin{footnotesize}(résultat = 9)\end{footnotesize} \\ \hline 	  	 
			\& 	  							&		opérateur logique \textit{et} bit à bit							& \codes{x = 11 \& 2} 
																															\begin{footnotesize}(résultat = 2)\end{footnotesize} \\ \hline 	  	 
			+ \; -							&   addition, soustraction 											& \codes{x = y + z} \\ \hline
			+=	\; -=						&   addition ou soustraction puis affectation  	& \texttt{x += 3} \\ \hline
			*	\; /	 						&		multiplication, division 										& \codes{x = y * z} \\ \hline
			//									&		division entière, le résultat est de type réel si l'un des nombres est réel
			                                        														& \codes{x = y // 3} \\ \hline
			\%									&		reste d'une division entière (modulo)				&	\codes{x = y \% 3} \\ \hline	 
			*=	\; /=						&		multiplication ou division puis affectation & \texttt{x *= 3} \\ \hline
			**									&   puissance (entière ou non, racine carrée = ** 0.5) & \codes{x = y ** 3} \\ \hline
			\end{tabularx}\end{center}
%

\indexfr{arrondi}\indexfr{conversion}
Les fonctions \codes{int} et \codes{float} permettent de convertir un nombre quelconque ou une chaîne de caractères respectivement en un entier (arrondi) et en un nombre réel.
\vspaceneg
\begin{verbatimx}
x = int (3.5)
y = float (3)
z = int ("3")
print "x:", type(x), "   y:", type(y), "   z:", type(z)
# affiche   x: <type 'int'>    y: <type 'float'>    z: <type 'int'>
\end{verbatimx}
%
\begin{xremark}{conversion en nombre entier}
Il peut arriver que la conversion en un nombre entier ne soit pas directe. Dans l'exemple qui suit, on cherche à convertir une chaîne de caractères (voir paragraphe~\ref{string_paragraphe_chaine}) en entier mais cette chaîne représente un réel. Il faut d'abord la convertir en réel puis en entier, c'est à ce moment que l'arrondi sera effectué.
\vspaceneg
\begin{verbatimx}
i = int ("3.5")          # provoque une erreur
i = int (float ("3.5"))  # fonctionne
\end{verbatimx}
\end{xremark}
\vspaceneg
%
\indexfr{priorité des opérateurs}\indexfrr{opérateur}{priorité}
Les opérateurs listés par le tableau ci-dessus ont des priorités différentes, triés par ordre croissant\footnote{La page \httpstyle{http://docs.python.org/reference/expressions.html\#operator-summary} est plus complète à ce sujet.}. Toutefois, il est conseillé d'avoir recours aux parenthèses pour enlever les doutes~: \codes{3 * 2 ** 4 = 3 * (2 ** 4)}.
%

\begin{xremark}{division entière}
Il existe un cas pour lequel cet opérateur cache un sens implicite~: lorsque la division opère sur deux nombres entiers ainsi que le montre l'exemple suivant.\indexfr{division entière} 
\vspaceneg
\begin{verbatimx}
x = 11
y = 2
z = x / y      # le résultat est 5 et non 5.5 car la division est entière
\end{verbatimx}
\vspaceneg
Pour obtenir le résultat juste incluant la partie décimale, il faut convertir les entiers en réels.
\vspaceneg
\begin{verbatimx}
x = float (11)
y = float (2)
z = x / y      # le résultat est 5.5 car c'est une division entre deux réels
\end{verbatimx}
\vspaceneg
Pour éviter d'écrire le type \codes{float}, on peut également écrire \codes{11.0 / 2} de façon à spécifier explicitement que la valeur 11.0 est réelle et non entière. L'opérateur \codes{//} permet d'effectuer une division entière lorsque les deux nombres à diviser sont réels, le résultat est un entier mais la variable est de type réel si l'un des nombres est de type réel. 
\end{xremark}
%
%

\subsection{Booléen}
\indextype{bool}
\indexfr{\codesindex{True}}\indexfr{\codesindex{False}}
%
%
Les booléens sont le résultat d'opérations logiques et ont deux valeurs possibles~: \codes{True} ou \codes{False}. Voici la liste des opérateurs qui s'appliquent aux booléens.

			\indexkeyword{and}\indexkeyword{or}\indexkeyword{not}
			\begin{center}\begin{tabularx}{\textwidth}{|llX|} \hline
			\textbf{opérateur}	&		\textbf{signification}		& \textbf{exemple} \\ \hline
			\codes{and} \;  \codes{or}	 	  		&		et, ou logique 						&	\codes{x = True \; or \; False} (résultat = True) \\ \hline
			\codes{not}									&		négation logique					& \codes{x = not \; x} \\ \hline
			\end{tabularx}\end{center}

\vspace{-0.4cm}
\begin{verbatimx}
x = 4 < 5
print x         # affiche True
print not x     # affiche False
\end{verbatimx}
\vspaceneg
%
			
%
Voici la liste des opérateurs de comparaisons qui retournent des booléens. Ceux-ci s'applique à tout type, aux entiers, réels, chaînes de caractères, t-uples... Une comparaison entre un entier et une chaîne de caractères est syntaxiquement correcte même si le résultat a peu d'intérêt.
%
			\indexsymbole{<}\indexsymbole{>}\indexsymbole{<=}\indexsymbole{>=}
			\indexsymbole{!=}\indexsymbole{==}\indexfrr{opérateur}{comparaison}
			\begin{center}\begin{tabular}{|lll|} \hline
			\textbf{opérateur}	&		\textbf{signification}								& \textbf{exemple} \\ \hline
			< \; >							&		inférieur, supérieur									&	\codes{x = 5  < 5} \\ \hline
			<= \; >=						&		inférieur ou égal, supérieur ou égal	& \codes{x = 5 <= 5} \\ \hline
			== \; !=						&		égal, différent 											& \codes{x = 5 == 5} \\ \hline
			\end{tabular}\end{center}
%
%
A l'instar des nombres réels, il est préférable d'utiliser les parenthèses pour éviter les problèmes de priorités d'opérateurs dans des expressions comme~: \codes{3 < x \; and \; x < 7}. Toutefois, pour cet exemple, \pythons accepte l'écriture résumée qui enchaîne des comparaisons~: \codes{3 < x \; and \; x < 7} est équivalent à \codes{3 < x < 7}. Il existe deux autres mots-clés qui retournent un résultat de type booléen~:
%			
			\indexkeyword{is}\indexkeyword{in}
			\begin{center}\begin{tabular}{|ll|} \hline
			\textbf{opérateur}	&		\textbf{signification} \\ \hline
			is					 	  		&		test d'identification		\\ \hline
			in									&		test d'appartenance			\\ \hline
			\end{tabular}\end{center}
%
Ces deux opérateurs seront utilisés ultérieurement, \codes{in} avec les listes, les dictionnaires, les boucles (paragraphe~\ref{boucle_for}), \codes{is} lors de l'étude des listes (paragraphe~\ref{par_liste_copie}) et des classes (chapitre~\ref{chap_classe}). Bien souvent, les booléens sont utilisés de manière implicite lors de tests (paragraphe~\ref{test_test}) ce qui n'empêche pas de les déclarer explicitement. \indextype{False, True}
\vspaceneg
\begin{verbatimx}
x = True
y = False
\end{verbatimx}


\subsection{Chaîne de caractères}  \label{string_paragraphe_chaine}
\indextypenoc{chaîne de caractères}\indextype{string}
\indexfr{chaîne de caractères}\indexclass{str}
%
%
\subsubsection{Création d'une chaîne de caractères}
%
				\begin{xdefinition}{chaîne de caractères}
				Le terme "chaîne de caractères" ou \emph{string} en anglais signifie 
				une suite finie de caractères, autrement dit, du texte.
				\end{xdefinition}

Ce texte est compris entre deux guillemets ou deux apostrophes, ces deux symboles sont interchangeables. L'exemple suivant montre comment créer une chaîne de caractères. Il ne faut pas confondre la partie entre guillemets ou apostrophes, qui est une constante, de la variable qui la contient.
%
\vspaceneg
\indexsymbole{"}\indexsymbole{'}\indexsymbole{"""}\indexsymbole{'''}\indexsymbolmodif{\backslash}
\begin{verbatimx}
t = "string = texte"
print type (t), t
t = 'string = texte, initialisation avec apostrophes'
print type (t), t

t = "morceau 1" \
    "morceau 2"    # second morceau ajouté au premier par l'ajout du symbole \, 
                   # il ne doit rien y avoir après le symbole \, 
                   # pas d'espace ni de commentaire
print t

t = """première ligne		
seconde ligne"""   # chaîne de caractères qui s'étend sur deux lignes
print t
\end{verbatimx}
%
\vspaceneg
Le résultat de ce petit programme est le suivant~:
\vspaceneg
%
\begin{verbatimx}
<type 'str'> string = texte
<type 'str'> string = texte, initialisation avec apostrophes
morceau 1morceau 2
première ligne
seconde ligne
\end{verbatimx}
\vspaceneg
%
La troisième chaîne de caractères créée lors de ce programme s'étend sur deux lignes. Il est parfois plus commode d'écrire du texte sur deux lignes plutôt que de le laisser caché par les limites de fenêtres d'affichage. \pythons offre la possibilité de couper le texte en deux chaînes de caractères recollées à l'aide du symbole $\backslash$ à condition que ce symbole soit le dernier de la ligne sur laquelle il apparaît. De même, lorsque le texte contient plusieurs lignes, il suffit de les encadrer entre deux symboles \texttt{"""} ou \texttt{'''} pour que l'interpréteur \pythons considère l'ensemble comme une chaîne de caractères et non comme une série d'instructions. 

Par défaut, le \pythons ne permet pas l'insertion de caractères tels que les accents dans les chaînes de caractères, le paragraphe~\ref{par_intro_accent_code} (page~\pageref{par_intro_accent_code}) explique comment résoudre ce problème. De même, pour insérer un guillemet dans une chaîne de caractères encadrée elle-même par des guillemets, il faut le faire précéder du symbole $\backslash$. La séquence \codes{\backslash"} est appelée un extra-caractère (voir table~\ref{extra_caractere}).
%
%
		\begin{table}[ht]
		%\hrulefill
		\begin{center}\begin{tabularx}{\textwidth}{|lX|}  \hline
		\codes{\backslash "} &	guillemet \\ 
		\codes{\backslash '} &	apostrophe \\ 
		\codes{\backslash n} &	passage à la ligne \\ 
		\codes{\backslash \backslash} &	insertion du symbole $\backslash$ \\ 
		\codes{\backslash \%} &	pourcentage, ce symbole est aussi un caractère spécial \\ 
		\codes{\backslash t} &	tabulation \\  
		\begin{tabular}{@{}l} \codes{\backslash r} \\ ~\\~ \end{tabular} &	
														retour à la ligne, peu usité, il a surtout son importance lorsqu'on passe
													  d'un système \textit{Windows} à \textit{Linux} car \textit{Windows} l'ajoute
													  automatiquement à tous ses fichiers textes \\  \hline
		\end{tabularx}\end{center}
		\caption{Liste des extra-caractères les plus couramment utilisés à l'intérieur d'une chaîne de caractères (voir 
						page \httpstyle{http://docs.python.org/reference/lexical\_analysis.html\#strings}).}
		\label{extra_caractere}
		\ifnotellipse{
			\indexfr{extra-caractère}\indexfrr{extra-caractère}{$\backslash "$}\indexfrr{extra-caractère}{$\backslash '$}
			\indexfrr{extra-caractère}{$\backslash n$}
			\indexfrr{extra-caractère}{$\backslash \backslash$}\indexfrr{extra-caractère}{$\backslash \%$}
			\indexfrr{extra-caractère}{$\backslash t$}\indexfrr{extra-caractère}{$\backslash r$}
		}
		\end{table}
		

		
\begin{xremark}{préfixe "r", chaîne de caractères}
Il peut être fastidieux d'avoir à doubler tous les symboles $\backslash$ d'un nom de fichier. Il est plus simple dans ce cas de préfixer la chaîne de caractères par \codes{r} de façon à éviter que l'utilisation du symbole $\backslash$ ne désigne un caractère spécial. Les deux lignes suivantes sont équivalentes~: \indexfrr{chaîne de caractères}{préfixe \codesindex{r}}
\vspaceneg
\begin{verbatimx}
s = "C:\\Users\\Dupre\\exemple.txt"
s = r"C:\Users\Dupre\exemple.txt"
\end{verbatimx}
\vspaceneg
\end{xremark}
Sans la lettre "r", tous les \codes{\backslash} doivent être doublés, dans le cas contraire, \pythons peut avoir des effets indésirables selon le caractère qui suit ce symbole.




\subsubsection{Manipulation d'une chaîne de caractères}
\indexfrr{chaîne de caractères}{manipulation}\indexfrr{chaîne de caractères}{conversion}\indexfr{conversion}
\indexfrr{chaîne de caractères}{concaténation}
\indexsymbole{+}\indexsymbole{[]}\indexsymbole{:}
\indexfonction{str}\indexfonction{len}
\label{fonction_str}
%
Une chaîne de caractères est semblable à un tableau et certains opérateurs qui s'appliquent aux tableaux s'appliquent également aux chaînes de caractères. Ceux-ci sont regroupés dans la table~\ref{operation_string}. La fonction \codes{str} permet de convertir un nombre, un tableau, un objet (voir chapitre~\ref{chap_classe}) en chaîne de caractères afin de pouvoir l'afficher. La fonction \codes{len} retourne la longueur de la chaîne de caractères.\indexfonctionbis{len}
%
\vspaceneg
\begin{verbatimx}
x = 5.567
s = str (x)
print type(s), s   # <type 'str'> 5.567
print len(s)       # affiche 5
\end{verbatimx}	
\vspaceneg
%			
			\begin{table}[ht]
			\begin{center}\begin{tabularx}{\textwidth}{|lXp{4.5cm}|}\hline
			\textbf{opérateur} & \textbf{signification} & \textbf{exemple} \\ \hline
			\codes{+} 		&  concaténation de chaînes de caractères	 & \begin{tabular}{l}\codes{t = "abc" + "def"}\end{tabular} \\ \hline
			\codes{+=} 		&  concaténation puis affectation & \begin{tabular}{l}\texttt{t += "abc" }\end{tabular} \\ \hline
			\codes{in}, \codes{not \; in} 		&  une chaîne en contient-elle une autre~?
			                              & \begin{tabular}{l}\texttt{"ed" in "med"}\end{tabular} \\ \hline
			\codes{*} 		&  répétition d'une chaîne de caractères	 & \begin{tabular}{l}\codes{t = "abc" * 4}\end{tabular} \\ \hline
			\codes{[n]} 	&  	%\begin{minipage}{8cm}
												obtention du n$^\text{ième}$ caractère, le premier 
												caractère a pour indice 0
												%\end{minipage}	
												&  
																																	%\begin{minipage}{5cm}
																																	\begin{tabular}{l}
																																	\codes{t = "abc"} \\
																																	\codes{print \; t [0]  \; \# \; donne \; a}
																																	\end{tabular}
																																	%\end{minipage} 
																																	\\ \hline
			\codes{[i:j]} 	&  	%\begin{minipage}{8cm}
													obtention des caractères compris entre les indices \codes{i} et 
													\codes{j-1} inclus, le premier caractère a pour indice 0
													%\end{minipage}	
													&  
																																	%\begin{minipage}{5cm}
																																	\begin{tabular}{l}
																																	\codes{t = "abc"} \\
																																	\codes{print \; t [0:2] \; \# \; donne \; ab}
																																	\end{tabular}
																																	%\end{minipage} 
																																	\\ \hline
			\end{tabularx}\end{center}
			\caption{Opérations applicables aux chaînes de caractères. \hspace{\linewidth}}
			\label{operation_string}
			\end{table}
%
%
Il existe d'autres fonctions qui permettent de manipuler les chaînes de caractères.

\begin{xsyntax}{fonctions et chaînes de caractères}
\begin{verbatimno}

res = s.fonction (...)
\end{verbatimno}
\negvspace
Où \codes{s} est une chaîne de caractères, \codes{fonction} est le nom de l'opération que l'on veut appliquer à \codes{s}, \codes{res} est le résultat de cette manipulation. \indexsyntaxenoc{méthode}
\end{xsyntax}

La table~\ref{string_method} (page~\pageref{string_method}) présente une liste non exhaustive des fonctions disponibles dont un exemple d'utilisation suit. Cette syntaxe \codes{variable.fonction (arguments)} est celle des classes\footnote{voir chapitre~\ref{chap_classe}}.
%

        \begin{table}[H]
        \begin{center}\begin{tabularx}
        				{\textwidth}{|lX|} \hline
        				%{|lp{10cm}|} \hline
        \begin{tabular}{@{}l} \codes{count(}\\
        \codes{ \;sub[, st} \\ \codes{ [, end]])} \end{tabular} &    
                                                    %\begin{minipage}{10cm}
                                                    Retourne le nombre d'occurrences de la chaîne de caractères \codes{sub},
                                                    les paramètres par défaut \codes{st} et \codes{end} permettent de réduire la
                                                    recherche entre les caractères d'indice \codes{st} et \codes{end} exclu. 
                                                    Par défaut, \codes{st} est nul tandis que \codes{end} correspond 
                                                    à la fin de la chaîne de caractères.
                                                    %\end{minipage} 
                                                    \\ \hline
        \begin{tabular}{@{}l} \codes{find( } \\
        \codes{\;sub[, st} \\ \codes{[, end]])} \end{tabular} & 
                                                    %\begin{minipage}{10cm}
                                                    Recherche une chaîne de caractères \codes{sub},
                                                    les paramètres par défaut \codes{st} et \codes{end} ont la même signification
                                                    que ceux de la fonction \codes{count}. Cette fonction retourne -1 si 
                                                    la recherche n'a pas abouti.
                                                    %\end{minipage} 
                                                    \\ \hline
        \codes{isalpha ()}    & 
                                                    %\begin{minipage}{10cm}
                                                    Retourne \codes{True} si tous les caractères sont des lettres, \codes{False} sinon.
                                                    %\end{minipage} 
                                                    \\ \hline
        \codes{isdigit ()}    &
                                                    %\begin{minipage}{10cm}
                                                    Retourne \codes{True} si tous les caractères sont des chiffres, \codes{False} sinon.
                                                    %\end{minipage} 
                                                    \\ \hline
        \begin{tabular}{@{}l} \codes{replace(} \\
         \codes{\; old, new[, co])}  \end{tabular} &
                                                    %\begin{minipage}{10cm}
                                                    Retourne une copie de la chaîne de caractères en remplaçant toutes les
                                                    occurrences de la chaîne \codes{old} par \codes{new}. Si le paramètre optionnel 
                                                    \codes{co} est renseigné, alors seules les \codes{co} premières occurrences
                                                    seront remplacées.
                                                    %\end{minipage} 
                                                    \\ \hline
        \begin{tabular}{@{}l}\codes{split(} \\
        \codes{\; [sep [,mspl]])} \end{tabular} &  
                                                    %\begin{minipage}{10cm}
                                                    Découpe la chaîne de caractères en se servant de la chaîne \codes{sep} comme
                                                    délimiteur. Si le paramètre \codes{mspl} est renseigné, au plus \codes{mspl}
                                                    coupures seront effectuées.
                                                  %\end{minipage} 
                                                  \\ \hline
				\codes{strip( [s])} &  
                                                    %\begin{minipage}{10cm}
                                                    Supprime les espaces au début et en fin de chaîne. Si le paramètre \codes{s} est
                                                    renseigné, la fonction \codes{strip} supprime tous les caractères qui font 
                                                    partie de \codes{s} au début et en fin de chaîne.
                                                  %\end{minipage} 
                                                  \\ \hline
        \codes{upper ()}    & Remplace les minuscules par des majuscules. \\ \hline
        \codes{lower ()}    & Remplace les majuscules par des minuscules. \\ \hline        
        \codes{join(words)} &  
                                                    %\begin{minipage}{10cm}
                                                    Fait la somme d'un tableau de chaînes de caractères (une liste ou un T-uple).
                                                    La chaîne de caractères sert de séparateur
                                                    qui doit être ajouté entre chaque élément du tableau \codes{words}.
                                                    Un exemple de cette fonction figure en page~\pageref{exemple_string_join}.
				%                                                 %\end{minipage} 
   																								\\ \hline
        \end{tabularx}\end{center}
        \caption{    Quelques fonctions s'appliquant aux chaînes de caractères, l'aide associée au langage \pythons 
                            fournira la liste complète (voir page \httpstyle{http://docs.python.org/library/stdtypes.html}). 
                            Certains des paramètres sont encadrés par des crochets,
                            ceci signifie qu'ils sont facultatifs.
                }
        \label{string_method}
       	\indexmethod{count}\indexmethod{strip}\indexmethod{split}\indexmethod{replace}
       	\indexmethod{isdigit}\indexmethod{isalpha}
        \indexmethod{find}\indexmethod{upper}\indexmethod{lower}
        \end{table}                            

\vspaceneg
\begin{verbatimx}
st = "langage python"
st = st.upper ()              # mise en lettres majuscules
i  = st.find ("PYTHON")       # on cherche "PYTHON" dans st
print i                       # affiche 8
print st.count ("PYTHON")     # affiche 1
print st.count ("PYTHON", 9)  # affiche 0
\end{verbatimx}
\vspaceneg
%
%
\label{exemple_string_join}
L'exemple suivant permet de retourner une chaîne de caractères contenant plusieurs éléments séparés par \codes{";"}. La chaîne \codes{"un;deux;trois"} doit devenir \codes{"trois;deux;un"}. On utilise pour cela les fonctionnalités \codes{split} et \codes{join} (voir table~\ref{string_method}).\indexmethod{split}\indexmethod{join} L'exemple utilise également la fonctionnalité \codes{reverse} des listes qui seront décrites plus loin dans ce chapitre. Il faut simplement retenir qu'une liste est un tableau. \codes{reverse} retourne le tableau.\indexmethod{reverse}\indexexemples{concaténation}{}
\vspaceneg
\begin{verbatimx}
s    = "un;deux;trois"
mots = s.split (";")        # mots est égal à ['un', 'deux', 'trois']
mots.reverse ()             # retourne la liste, mots devient égal à 
                            #                 ['trois', 'deux', 'un']
s2 = ";".join (mots)        # concaténation des éléments de mots séparés par ";"
print s2                    # affiche trois;deux;un
\end{verbatimx}
\vspaceneg                                                  
%


\subsubsection{Formatage d'une chaîne de caractères}\label{label_formattage_string_}
\indexfrr{chaîne de caractères}{formatage}
%
\pythons offre une manière plus concise de former une chaîne de caractères à l'aide de plusieurs types d'informations en évitant la conversion explicite de ces informations (fonction \codes{str}) et leur concaténation. Il est particulièrement intéressant pour les nombres réels qu'il est possible d'écrire en imposant un nombre de décimales fixe. Le format est le suivant~:



\begin{xsyntax}{chaîne de caractères, formatage}
\begin{verbatimno}

".... %c1  ....  %c2 " % (v1,v2)
\end{verbatimno}
\negvspace
\codes{c1} est un code choisi parmi ceux de la table~\ref{format_print} (page~\pageref{format_print}). Il indique le format dans lequel la variable \codes{v1} devra être transcrite. Il en est de même pour le code \codes{c2} associé à la variable \codes{v2}. Les codes insérés dans la chaîne de caractères seront remplacés par les variables citées entre parenthèses après le symbole \codes{\%} suivant la fin de la chaîne de caractères. Il doit y avoir autant de codes que de variables, qui peuvent aussi être des constantes. \indexsyntaxenoc{formatage d'une chaîne de caractères}
\end{xsyntax}

Voici concrètement l'utilisation de cette syntaxe~:
\vspaceneg\indexexemples{formatage de chaîne de caractères}{}
\begin{verbatimx}
x = 5.5
d = 7
s = "caractères"
res =   "un nombre réel %f et un entier %d, une chaîne de %s, \n" \
        "un réel d'abord converti en chaîne de caractères %s" % (x,d,s, str(x+4))
print res        
res =   "un nombre réel " + str (x) + " et un entier " + str (d) + \
        ", une chaîne de " + s + \
        ",\n un réel d'abord converti en chaîne de caractères " + str(x+4)
print res        
\end{verbatimx}
\vspaceneg
%
La seconde affectation de la variable \codes{res} propose une solution équivalente à la première en utilisant l'opérateur de concaténation \codes{+}. Les deux solutions sont équivalentes, tout dépend des préférences de celui qui écrit le programme.
\vspaceneg
\begin{verbatimx}
un nombre réel 5.500000 et un entier 7, une chaîne de caractères, 
un réel d'abord converti en chaîne de caractères 9.5
un nombre réel 5.5 et un entier 7, une chaîne de caractères,
un réel d'abord converti en chaîne de caractères 9.5
\end{verbatimx}
\vspaceneg
%
La première option permet néanmoins un formatage plus précis des nombres réels en imposant par exemple un nombre défini de décimal. Le format est le suivant~:

\begin{xsyntax}{chaîne de caractères, formatage des nombres}
\begin{verbatimno}

"%n.df" % x
\end{verbatimno}
\negvspace
où \codes{n} est le nombre de chiffres total et \codes{d} est le nombre de décimales, \codes{f} désigne un format réel indiqué par la présence du symbole \codes{\%}
\indexsyntaxenoc{formatage des nombres}
\end{xsyntax}
            
%\vspaceneg           
%Exemple~:       
\vspace{-0.4cm}     
\begin{verbatimx}
x = 0.123456789
print x             # affiche 0.123456789
print "%1.2f" % x   # affiche 0.12
print "%06.2f" % x  # affiche 000.12
\end{verbatimx}
\vspaceneg 
%
Il existe d'autres formats regroupés dans la table~\ref{format_print}. L'aide reste encore le meilleur réflexe car le langage \pythons est susceptible d'évoluer et d'ajouter de nouveaux formats.
%
            \begin{table}[ht]
            \begin{center}\begin{tabularx}{\textwidth}{|lX|} \hline
            d & entier relatif\\ \hline  
            e & nombre réel au format exponentiel    \\ \hline  
            f & nombre réel au format décimal                                   \\ \hline  
            g & nombre réel, format décimal ou exponentiel si la puissance est trop grande ou trop petite  \\ \hline  
            s & chaîne de caractères \\ \hline  
            \end{tabularx}\end{center}
            \caption{    Liste non exhaustive des codes utilisés pour formater des informations
                                dans une chaîne de caractères (voir page
                                 \httpstyle{http://docs.python.org/library/stdtypes.html}).}
            \label{format_print}
            \end{table}                                    

\vspaceneg

\subsection{T-uple} \indextype{tuple}  \label{parag_tuple_defindfg}\indexclass{tuple}
        \begin{xdefinition}{T-uple}
        Les T-uple sont un tableau d'objets qui peuvent être de tout type. Ils ne sont pas modifiables.
        \end{xdefinition}

Un T-uple apparaît comme une liste d'objets comprise entre parenthèses et séparés par des virgules. Leur création reprend le même format~:
\vspaceneg
\begin{verbatimx}
x = (4,5)               # création d'un T-uple composé de 2 entiers
x = ("un",1,"deux",2)   # création d'un T-uple composé de 2 chaînes de caractères
                        # et de 2 entiers, l'ordre d'écriture est important
x = (3,)                # création d'un T-uple d'un élément, sans la virgule, 
                        # le résultat est un entier
\end{verbatimx}    
\vspaceneg                    
\indexfr{vecteur}
Ces objets sont des vecteurs d'objets. Il est possible d'effectuer les opérations regroupées dans la table~\ref{operation_tuple}. Etant donné que les chaînes de caractères sont également des tableaux, ces opérations reprennent en partie celles de la table~\ref{operation_string}.
%
\indexsymbole{+}\indexsymbole{*}\indexsymbole{[]}\indexsymbole{()}
\indexkeyword{in}\indexkeyword{not}

%
        \begin{table}[ht]
        \begin{center}\begin{tabularx}{\textwidth}{|lX|} \hline
        \codes{x \; in \; s}                & vrai si \codes{x} est un des éléments de \codes{s} \\  \hline
        \codes{x \; not \; in \; s}    & réciproque de la ligne précédente \\  \hline
        \codes{s + t}                                & concaténation de \codes{s} et \codes{t}   \\  \hline
        \codes{s * n}    & concatène \codes{n} copies de \codes{s} les unes à la suite des autres   \\  \hline
        \codes{s[i]}                                & retourne le i$^\text{ème}$ élément de \codes{s}  \\  \hline
        \codes{s[i:j]}                            & %\begin{minipage}{10cm} 
                                                                    retourne un T-uple contenant 
                                                                    une copie des éléments de \codes{s} d'indices $i$ à 
                                                                    $j$ exclu. 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{s[i:j:k]}                        & %\begin{minipage}{10cm} 
                                                                    retourne un T-uple contenant une copie 
                                                                    des éléments de \codes{s} dont les 
                                                                    indices sont compris entre $i$ et $j$ 
                                                                    exclu, ces indices sont espacés de $k$~:
                                                                    $i, i+k, i+2k, i+3k, ...$ 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{len(s)}                            & nombre d'éléments de \codes{s} \\ \hline
        \codes{min(s)}                            & %\begin{minipage}{10cm}
                                                                    plus petit élément de \codes{s}, résultat difficile à prévoir 
                                                                    lorsque les types des éléments sont différents 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{max(s)}                            & %\begin{minipage}{10cm}
                                                                    plus grand élément de \codes{s} 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{sum(s)}                            & %\begin{minipage}{10cm}
                                                                    retourne la somme de tous les éléments 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \end{tabularx}\end{center}
        \caption{ Opérations disponibles sur les T-uples, on suppose que \codescaption{s} et \codescaption{t} sont des T-uples, 
                            \codescaption{x} est quant à lui quelconque.
                            }
        \label{operation_tuple}
        \indexfonctionbis{len}\indexfonctionbis{max}\indexfonctionbis{min}
        \end{table}                            



\begin{xremark}{T-uple, opérateur []}
Les T-uples ne sont pas modifiables, cela signifie qu'il est impossible de modifier un de leurs éléments. Par conséquent, la ligne d'affectation suivante n'est pas correcte~:\indexfr{modifiable}
\begin{verbatimx}
a     = (4,5)
a [0] = 3      # déclenche une erreur d'exécution
\end{verbatimx}
\vspaceneg
Le message d'erreur suivant apparaît~:
\vspaceneg
\begin{verbatimx}
Traceback (most recent call last):
  File "<pyshell#78>", line 1, in -toplevel-
    a[0]=3
TypeError: object doesn't support item assignment
\end{verbatimx}
\vspaceneg
Pour changer cet élément, il est possible de s'y prendre de la manière suivante~:
\vspaceneg
\begin{verbatimx}
a = (4,5)
a = (3,) + a[1:2]  # crée un T-uple d'un élément concaténé 
                   # avec la partie inchangée de a
\end{verbatimx}
\end{xremark}






\subsection{Autres types}
\indextype{complex}\indextypenoc{complexe}

Il existe d'autres types comme le type \codes{complex} permettant de représenter les nombres complexes. Ce type numérique suit les mêmes règles et fonctionne avec les mêmes opérateurs (excepté les opérateurs de comparaisons) que ceux présentés au paragraphe~\ref{type_nombre} et décrivant les nombres. \vspaceneg
\begin{verbatimx}
print complex (1,1)   # affiche (1+1j)
\end{verbatimx}
\vspaceneg
\indexoperator{\_\_slots\_\_}
Le langage \pythons offre la possibilité de créer ses propres types immuables\footnote{voir le paragraphe~\ref{classe_slots_att}} mais ils seront définis à partir des types immuables présentés jusqu'ici.












\section{Types modifiables (ou \textit{mutable})}
\indextypenoc{modifiable}

Les types modifiables sont des conteneurs (ou containers en anglais)~: ils contiennent d'autres objets, que ce soit des nombres, des chaînes de caractères ou des objets de type modifiable.\indexfr{conteneur} Plutôt que d'avoir dix variables pour désigner dix objets, on en n'utilise qu'une seule qui désigne ces dix objets.

			\begin{xdefinition}{type modifiable (ou mutable)}
			Une variable de type modifiable peut être modifiée, elle conserve le même type et le même identificateur. C'est uniquement
			son contenu qui évolue.
			\end{xdefinition}


\subsection{Liste}
\indextypenoc{liste}\indextype{list}\indexclass{list}

\subsubsection{Définition et fonctions}
%
        \begin{xdefinition}{liste}
        Les listes sont des collections d'objets qui peuvent être de tout type.
        Elles sont modifiables.
        \end{xdefinition}

Une liste apparaît comme une succession d'objets compris entre crochets et séparés par des virgules. Leur création reprend le même format~:
%
\begin{verbatimx}
x = [4,5]               # création d'une liste composée de deux entiers
x = ["un",1,"deux",2]   # création d'une liste composée de 
                        # deux chaînes de caractères
                        # et de deux entiers, l'ordre d'écriture est important
x = [3,]                # création d'une liste d'un élément, sans la virgule, 
                        # le résultat reste une liste
x = [ ]                 # crée une liste vide
x = list ()             # crée une liste vide
y = x [0]               # accède au premier élément
y = x [-1]              # accède au dernier élément
\end{verbatimx}                         
%
\indexfrr{liste}{chaînée}\indexfrr{tri}{liste}\indexfrr{liste}{tri}\indexfrr{liste}{insertion}
\indexfrr{liste}{suppression}
Ces objets sont des listes chaînées d'autres objets de type quelconque (immuable ou modifiable). Il est possible d'effectuer les opérations regroupées dans la table~\ref{operation_liste}. Ces opérations reprennent celles des T-uples (voir table~\ref{operation_tuple}) et incluent d'autres fonctionnalités puisque les listes sont modifiables (voir table~\ref{operation_liste}). Il est donc possible d'insérer, de supprimer des éléments, de les trier. La syntaxe des opérations sur les listes est similaire à celle des opérations qui s'appliquent sur les chaînes de caractères, elles sont présentées par la table~\ref{operation_liste2}. 



        \begin{table}[ht]
        \begin{center}\begin{tabularx}{\textwidth}{|lX|} \hline
        \codes{x \; in \; l}                & vrai si \codes{x} est un des éléments de \codes{l} \\  \hline
        \codes{x \; not \; in \; l}    & réciproque de la ligne précédente \\  \hline
        \codes{l + t}                                & concaténation de \codes{l} et \codes{t}   \\  \hline
        \codes{l * n }    & concatène \codes{n} copies de \codes{l} les unes à la suite des autres   \\  \hline
        \codes{l[i]}                                & %\begin{minipage}{10cm}
                                                                    retourne l'élément i$^\text{ème}$ élément de \codes{l},
                                                                    à la différence des T-uples, l'instruction \codes{l [i] = "a"}
                                                                    est valide, elle remplace l'élément \codes{i} par \codes{"a"}. 
                                                                    Un indice négatif correspond à la position \codes{len(l)+i}.
                                                                    %\end{minipage}  
                                                                    \\  \hline
        \codes{l[i:j]}                            & %\begin{minipage}{10cm} 
                                                                    retourne une liste contenant les 
                                                                    éléments de \codes{l} d'indices $i$ à 
                                                                    $j$ exclu. Il est possible de remplacer 
                                                                    cette sous-liste par une autre en 
                                                                    utilisant l'affectation \codes{ l[i:j] = l2 } où \codes{l2}
                                                                    est une autre liste (ou un T-uple) de dimension différente ou égale.
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{l[i:j:k]}                        & %\begin{minipage}{10cm} 
                                                                    retourne une liste contenant les éléments de \codes{l} dont les 
                                                                    indices sont compris entre $i$ et $j$ 
                                                                    exclu, ces indices sont espacés de $k$~:
                                                                    $i, i+k, i+2k, i+3k, ...$ Ici encore, 
                                                                    il est possible d'écrire l'affectation
                                                                    suivante~: \codes{ l[i:j:k] = l2 } 
                                                                    mais \codes{l2} doit être une liste 
                                                                    (ou un T-uple) de même dimension que \codes{ l[i:j:k]}.
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{len(l)}                            & nombre d'éléments de \codes{l} \\ \hline
        \codes{min(l)}                            & %\begin{minipage}{10cm}
                                                                    plus petit élément de \codes{l}, résultat difficile à prévoir 
                                                                    lorsque les types des éléments sont différents 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{max(l)}                            & %\begin{minipage}{10cm}
                                                                    plus grand élément de \codes{l} 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{sum(l)}                            & %\begin{minipage}{10cm}
                                                                    retourne la somme de tous les éléments 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{del \;l [i:j]}                &    %\begin{minipage}{10cm}
                                                                  supprime les éléments d'indices entre \codes{i} et \codes{j} exclu.
                                                                  Cette instruction est équivalente à \codes{ l [i:j] = [] }.
                                                                  %\end{minipage} 
                                                                  \\ \hline
        \codes{list (x)}                     &    %\begin{minipage}{10cm}
                                                                  convertit \codes{x} en une liste quand cela est possible
                                                                  %\end{minipage} 
                                                                  \\ \hline
        \end{tabularx}\end{center}
        \caption{ Opérations disponibles sur les listes, identiques à celles des T-uples, 
                            on suppose que \codescaption{l} et \codescaption{t} sont des listes, \codescaption{i} et
                             \codescaption{j} sont
                            des entiers.
                            \codes{x} est quant à lui quelconque.}
        \label{operation_liste}
        \indexfonction{min}\indexfonction{max}\indexfonction{len}\indexfonction{sum}\indexkeyword{del}
				\indexsymbole{.}\indexsymbole{:}\indexsymbole{[]}
				\indexkeyword{in}\indexkeyword{not}\indexkeyword{del}
        \end{table}                            


		\begin{table}[ht]
		\begin{center}\begin{tabularx}{\textwidth}{|lX|} \hline
		\codes{l.count (x)}                & %\begin{minipage}{10cm}
		                                                        Retourne le nombre d'occurrences de l'élément \codes{x}. Cette notation
		                                                        suit la syntaxe des classes développée au chapitre~\ref{chap_classe}.
		                                                        \codes{count} est une méthode de la classe \codes{list}.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.index (x)}                & %\begin{minipage}{10cm}
		                                                        Retourne l'indice de la première occurrence de l'élément \codes{x}
		                                                        dans la liste \codes{l}. Si celle-ci n'existe pas, une exception est 
		                                                        déclenchée (voir le paragraphe~\ref{chap_exception} ou 
		                                                        l'exemple page~\pageref{exemple_list_index_erreyr_ref}).
		                                                        \indexfr{exception}
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.append (x)}          & %\begin{minipage}{10cm}
		                                                        Ajoute l'élément \codes{x} à la fin de la liste \codes{l}. Si \codes{x}
		                                                        est une liste, cette fonction ajoute la liste \codes{x} en tant qu'élément,
		                                                        au final, la liste \codes{l} ne contiendra qu'un élément de plus.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.extend (k)}            & %\begin{minipage}{10cm}
		                                                        Ajoute tous les éléments de la liste \codes{k} à la liste \codes{l}.
		                                                        La liste \codes{l} aura autant d'éléments supplémentaires qu'il y en a
		                                                        dans la liste \codes{k}.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.insert(i,x)}            & %\begin{minipage}{10cm}
		                                                        Insère l'élément \codes{x} à la position \codes{i} dans la liste \codes{l}.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.remove (x)}            & %\begin{minipage}{10cm}
		                                                        Supprime la première occurrence de 
		                                                        l'élément \codes{x} dans la liste~\codes{l}.
		                                                        S'il n'y a aucune occurrence de \codes{x}, cette méthode déclenche
		                                                        une exception.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.pop ([i])}                & %\begin{minipage}{10cm}
		                                                        Retourne l'élément \codes{l[i]} et le supprime de la liste. Le
		                                                        paramètre \codes{i} est facultatif, s'il n'est pas précisé, c'est le dernier
		                                                        élément qui est retourné puis supprimé de la liste.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\codes{l.reverse (x)}            & %\begin{minipage}{10cm}
		                                                        Retourne la liste, le premier et dernier élément échange leurs places,
		                                                        le second et l'avant dernier, et ainsi de suite.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\begin{tabular}{lr}\codes{l.sort ([f, }\\ \codes{reverse])}  \end{tabular}        & %\begin{minipage}{10cm}
		                                                        Cette fonction trie la liste par ordre croissant. Le paramètre \codes{f}
		                                                        est facultatif, il permet de préciser la fonction de comparaison qui doit
		                                                        être utilisée lors du tri. Cette fonction prend comme paramètre 
		                                                        deux éléments \codes{x} et 
		                                                        \codes{y} de la liste et retourne les valeurs -1,0,1 
		                                                        selon que \codes{x < y}, \codes{x == y} ou \codes{x > y} 
		                                                        (voir paragraphe~\ref{chap_fonction}). Si \codes{rev} est
		                                                        \codes{True}, alors le tri est décroissant.
		                                                        %\end{minipage}  
		                                                        \\  \hline
		\end{tabularx}\end{center}
		\caption{ Opérations permettant de modifier une liste on suppose que \codescaption{l} est une liste, 
		                    \codescaption{x} est quant à lui quelconque.}
		\indexmethod{count}\indexmethod{index}\indexmethod{append}\indexmethod{extend}\indexmethod{insert}\indexmethod{remove}
		\indexmethod{pop}\indexmethod{reverse}\indexmethod{sort}
		\label{operation_liste2}
		\end{table}                            


\subsubsection{Exemples}
%
L'exemple suivant montre une utilisation de la méthode \codes{sort}. \vspaceneg\indexexemples{tri}{}
\begin{verbatimxnocut}
x = [9,0,3,5,4,7,8]          # définition d'une liste
print x                      # affiche cette liste
x.sort ()                    # trie la liste par ordre croissant
print x                      # affiche la liste triée
\end{verbatimxnocut}
%
\vspaceneg 
Voici les deux listes affichées par cet exemple~:
\vspaceneg
%
\begin{verbatimx}
[9, 0, 3, 5, 4, 7, 8]
[0, 3, 4, 5, 7, 8, 9]
\end{verbatimx}
\vspaceneg
Pour classer les objets contenus par la liste mais selon un ordre différent, il faut définir une fonction qui détermine un ordre entre deux éléments de la liste. C'est la fonction \codes{compare} de l'exemple suivant.\vspaceneg\indexexemples{tri}{}
\begin{verbatimx}
def compare (x,y):           # crée une fonction
    if   x >  y : return -1  # qui retourne -1 si x<y,
    elif x == y : return 0   # 0 si x == y
    else        : return 1   # 1 si x < y

x.sort (compare)             # trie la liste x à l'aide de la fonction compare
                             # cela revient à la trier par ordre décroissant
print x
\end{verbatimx}
%
\vspaceneg
Le programme affiche cette fois-ci la ligne~:
\vspaceneg
%
\begin{verbatimx}
[9, 8, 7, 5, 4, 3, 0]
\end{verbatimx}
%
\vspaceneg
L'exemple suivant illustre un exemple dans lequel on essaye d'accéder à l'indice d'un élément qui n'existe pas dans la liste~: 
\vspaceneg
%
\begin{verbatimx}
x = [9,0,3,5,0]
print x.index (1) # cherche la position de l'élément 1
\end{verbatimx}
\label{exemple_list_index_erreyr_ref}
%
\indexfr{exception}\vspaceneg
Comme cet élément n'existe pas, on déclenche ce qu'on appelle une exception qui se traduit par l'affichage d'un message d'erreur. Le message indique le nom de l'exception générée (\codes{ValueError}) ainsi qu'un message d'information permettant en règle générale de connaître l'événement qui en est la cause.\vspaceneg
%
\begin{verbatimx}
Traceback (most recent call last):
  File "c:/temp/temp", line 2, in -toplevel-
    print x.index(1)
ValueError: list.index(x): x not in list
\end{verbatimx}
%
\vspaceneg
Pour éviter cela, on choisit d'intercepter l'exception (voir paragraphe~\ref{chap_exception}).
\vspaceneg
%
\begin{verbatimx}
x = [9,0,3,5,0]
try:               print x.index(1)
except ValueError: print "1 n'est pas présent dans la liste x"
else:              print "trouvé"
\end{verbatimx}
%
\vspaceneg
Ce programme a pour résultat~:
\vspaceneg
%
\begin{verbatimx}
1 n'est pas présent dans la liste x
\end{verbatimx}
%


\subsubsection{Fonctions \codes{range}, \codes{xrange}}\label{fonction_range_xrange}
\indexfr{boucle}\indexfonction{range}\indexfonction{xrange}
%
Les listes sont souvent utilisées dans des boucles ou notamment par l'intermédiaire de la fonction \codes{range}. Cette fonction retourne une liste d'entiers.

\begin{xsyntax}{\codes{range}}
\begin{verbatimno}

range (debut, fin [,marche])
\end{verbatimno}
\negvspace
Retourne une liste incluant tous les entiers compris entre \codes{debut} et \codes{fin} exclu. Si le paramètre facultatif \codes{marche} est renseigné, la liste contient tous les entiers \codes{n} compris \codes{debut} et \codes{fin} exclu et tels que \codes{n - debut} soit un multiple de \codes{marche}.
\indexsyntaxecod{range}
\end{xsyntax}

\vspaceneg
Exemple~:
\vspaceneg
%
\begin{verbatimx}
print range (0,10,2)       # affiche [0, 2, 4, 6, 8]
\end{verbatimx}
%
\vspaceneg
La fonction \codes{xrange} est d'un usage équivalent à \codes{range}. Elle permet de parcourir une liste d'entiers sans la créer vraiment. Elle est plus rapide.
\vspaceneg
%
\begin{verbatimx}
print xrange (0,10,2)      # affiche xrange(0,10,2)
\end{verbatimx}
%
%
\indexkeyword{for}\indexkeyword{in}
%
\vspaceneg
Cette fonction est souvent utilisée lors de boucles\footnote{voir paragraphe~\ref{boucle_for}} pour parcourir tous les éléments d'un T-uple, d'une liste, d'un dictionnaire... Le programme suivant permet par exemple de calculer la somme de tous les entiers impairs compris entre~1~et~20~exclu.
\vspaceneg\indexexemples{somme}{}
%
\begin{verbatimx}
s = 0
for n in range (1,20,2) :  # ce programme est équivalent à
    s += n                 # s = sum (range(1,20,2))
\end{verbatimx}
%
\vspaceneg
Le programme suivant permet d'afficher tous les éléments d'une liste.

\begin{center}\begin{tabular}{@{}lr@{}}
\begin{minipage}{8.7cm}
\begin{verbatimx}
x = ["un", 1, "deux", 2, "trois", 3]
for n in range (0, len(x)) :
    print "x [%d] = %s" % (n, x [n])
    
# le résultat est présenté à droite    
    
\end{verbatimx}    
\end{minipage}
&
\begin{minipage}{4.7cm}
\begin{verbatimx}
x [0] = un
x [1] = 1
x [2] = deux
x [3] = 2
x [4] = trois
x [5] = 3
\end{verbatimx}    
\end{minipage}
\end{tabular}
\end{center}
%
%


\subsubsection{Boucles et listes}
\label{liste_for_raccourci}
%
Il est possible aussi de ne pas se servir des indices comme intermédiaires pour accéder aux éléments d'une liste quand il s'agit d'effectuer un même traitement pour tous les éléments de la liste \codes{x}. \vspaceneg
%
\indexkeyword{for}\indexkeyword{in}
\begin{verbatimx}
x = ["un", 1, "deux", 2]
for el in x :  
    print "la liste inclut : ", el
\end{verbatimx}    
%
\vspaceneg
L'instruction \codes{for \; el\;  in \; x \; :} se traduit littéralement par~: \textit{pour tous les éléments de la liste, faire...} Ce programme a pour résultat~:
\vspaceneg
%
\begin{verbatimx}
la liste inclut :  un
la liste inclut :  1
la liste inclut :  deux
la liste inclut :  2
\end{verbatimx}    
%
%
\vspaceneg
Il existe également des notations abrégées lorsqu'on cherche à construire une liste à partir d'une autre. Le programme suivant construit la liste des entiers de 1 à 5 à partir du résultat retourné par la fonction \codes{range}.\vspaceneg
\indexfonction{range}\indexkeyword{for}\indexmethod{append}\indexkeyword{in}
\begin{verbatimx}
y = list ()
for i in range(0,5) : y.append (i+1)
print y                                # affiche [1,2,3,4,5]        
\end{verbatimx}    
%
\vspaceneg
Le langage \pythons offre la possibilité de résumer cette écriture en une seule ligne. Cette syntaxe sera reprise au paragraphe~\ref{liste_for_raccourci2}.
\vspaceneg
%
\indexkeyword{for}
\begin{verbatimx}
y = [ i+1 for i in range (0,5)]
print y                                # affiche [1,2,3,4,5]        
\end{verbatimx}    
%
\vspaceneg
Cette définition de liste peut également inclure des tests ou des boucles imbriquées.
\vspaceneg
%
\indexkeyword{if}\indexkeyword{for}\indexexemples{écriture condensée}{}
\begin{verbatimx}
y = [ i for i in range(0,5) if i % 2 == 0]   # sélection les éléments pairs
print y                                      # affiche [0,2,4]        
z = [ i+j for i in range(0,5) \
          for j in range(0,5)]      # construit tous les nombres i+j possibles
print z                             # affiche [0, 1, 2, 3, 4, 1, 2, 3, 4, 5, 2, 
                                    # 3, 4, 5, 6, 3, 4, 5, 6, 7, 4, 5, 6, 7, 8]
\end{verbatimx}    


\subsubsection{Collage de séquences, fonction \codes{zip}} \label{fonction_zip}
\indexfonction{zip}\ifnotellipse{\indexfrr{séquence}{collage}\indextypenoc{séquence}\indexfr{collage de séquences}}\indexfrr{liste}{collage}
%
On suppose qu'on dispose de $n$ séquences d'éléments (T-uple, liste), toutes de longueur $l$. La fonction \codes{zip} permet de construire une liste de T-uples qui est la juxtaposition de toutes ces séquences. Le $i^\text{ième}$ T-uple de la liste résultante contiendra tous les $i^\text{ième}$ éléments des séquences juxtaposées. Si les longueurs des séquences sont différentes, la liste résultante aura même taille que la plus courte des séquences. \vspaceneg
%
\begin{verbatimx}
a = (1,0,7,0,0,0)
b = [2,2,3,5,5,5]
c = [ "un", "deux", "trois", "quatre" ]
d = zip (a,b,c)
print d           # affiche [(1, 2, 'un'),    (0, 2, 'deux'), 
                  #          (7, 3, 'trois'), (0, 5, 'quatre')]
\end{verbatimx}


\subsubsection{Concaténation de chaîne de caractères} \indexfrr{chaîne de caractères}{concaténation}

Il arrive fréquemment de constuire une chaîne de caractères petits bouts par petits bouts comme le montre le premier exemple ci-dessous. Cette construction peut s'avérer très lente lorsque le résultat est long. Dans ce cas, il est nettement plus rapide d'ajouter chaque morceau dans une liste puis de les concaténer en une seule fois grâce à la méthode \codes{join}.\indexmethod{join}
\begin{center}\begin{tabular}{@{}lr@{}}
\begin{minipage}{6.7cm}
\begin{verbatimx}
s = ""
while <condition> : s += ...
    
\end{verbatimx}
\end{minipage}    
&
\begin{minipage}{6.7cm}
\begin{verbatimx}
s = []
while <condition> : s.append ( ... )
s = "".join (s)
\end{verbatimx}
\end{minipage}    
\end{tabular}
\end{center}




\subsection{Copie}\label{par_liste_copie}
\indexfrr{liste}{copie}
A l'inverse des objets de type immuable, une affectation ne signifie pas une copie. Afin d'éviter certaines opérations superflues et parfois coûteuses en temps de traitement, on doit distinguer la variable de son contenu. Une variable désigne une liste avec un mot (ou identificateur), une affection permet de créer un second mot pour désigner la même liste. Il est alors équivalent de faire des opérations avec le premier mot ou le second comme le montre l'exemple suivant avec les listes~\codes{l} et~\codes{l2}. \vspaceneg
%
\begin{verbatimx}
l  = [4,5,6]
l2 = l
print l            # affiche [4,5,6]
print l2           # affiche [4,5,6]
l2 [1] = "modif"
print l            # affiche [4, 'modif', 6]
print l2           # affiche [4, 'modif', 6]
\end{verbatimx}
\vspaceneg
%
Dans cet exemple, il n'est pas utile de créer une seconde variable, dans le suivant, cela permet quelques raccourcis. \vspaceneg
\begin{verbatimx}
l      = [[0,1], [2,3]]
l1     = l [0]
l1 [0] = "modif" # ligne équivalente à : l [0][0] = "modif"
\end{verbatimx}
\vspaceneg
%
\indexmoduleint{copy}\indexfonction{copy}
Par conséquent, lorsqu'on affecte une liste à une variable, celle-ci n'est pas recopiée, la liste reçoit seulement un nom de variable. L'affectation est en fait l'association d'un nom avec un objet (voir paragraphe~\ref{par_copie_objet}). Pour copier une liste, il faut utiliser la fonction \codes{copy} du module \codes{copy}\footnote{Le module \codesnote{copy} est une extension interne. C'est une librairie de fonctions dont la fonction \codesnote{copy}. Cette syntaxe sera vue au chapitre~\ref{chap_module}.}. Ce point sera rappelé au paragraphe~\ref{classe_list_dict_ref_par} (page~\pageref{classe_list_dict_ref_par}). \vspaceneg\indexexemples{copie}{}
%
\begin{verbatimx}
import copy
l  = [4,5,6]
l2 = copy.copy(l)
print l            # affiche [4,5,6]
print l2           # affiche [4,5,6]
l2 [1] = "modif"
print l            # affiche [4,5,6]
print l2           # affiche [4, 'modif', 6]
\end{verbatimx}
%
\vspaceneg
L'opérateur \codes{==} permet de savoir si deux listes sont égales même si l'une est une copie de l'autre. Le mot-clé \codes{is}\indexkeyword{is} permet de vérifier si deux variables font référence à la même liste ou si l'une est une copie de l'autre comme le montre l'exemple suivant~:
\vspaceneg\indexexemples{copie}{}
%
\begin{verbatimx}
import copy
l  = [1,2,3]
l2 = copy.copy (l)
l3 = l

print l == l2  # affiche True
print l is l2  # affiche False
print l is l3  # affiche True 
\end{verbatimx}
\vspaceneg
%
\begin{xremark}{fonction \codes{copy} et \codes{deepcopy}}
Le\label{copy_deepopy_remarque_} comportement de la fonction \codes{copy} peut surprendre dans le cas où une liste contient d'autres listes. Pour être sûr que chaque élément d'une liste a été correctement recopiée, il faut utiliser la fonction \codes{deepcopy}.\indexfonction{deepcopy}\indexmoduleint{copy} La fonction est plus longue mais elle recopie toutes les listes que ce soit une liste incluse dans une liste elle-même incluse dans une autre liste elle-même incluse...\indexexemples{copie}{}
\vspaceneg
\begin{verbatimx}
import copy
l  = [[1,2,3],[4,5,6]]
l2 = copy.copy (l)
l3 = copy.deepcopy (l)
l [0][0] = 1111
print l                # affiche [[1111, 2, 3], [4, 5, 6]]
print l2               # affiche [[1111, 2, 3], [4, 5, 6]]
print l3               # affiche [[1, 2, 3], [4, 5, 6]]
print l is l2          # affiche False
print l [0] is l2 [0]  # affiche True
print l [0] is l3 [0]  # affiche False
\end{verbatimx}
\vspaceneg
%
La fonction \codes{deepcopy} est plus lente à exécuter car elle prend en compte les références récursives comme celles de l'exemple suivant où deux listes se contiennent l'une l'autre.\indexexemples{copie}{}
\vspaceneg
\begin{verbatimx}
l     = [1,"a"]
ll    = [l,3]   # ll contient l
l [0] = ll      # l contient ll
print l         # affiche [[[...], 3], 'a']
print ll        # affiche [[[...], 'a'], 3]

import copy
z = copy.deepcopy (l)
print z         # affiche [[[...], 3], 'a']
\end{verbatimx}
\end{xremark}



\subsection{Dictionnaire}
\indextypenoc{dictionnaire}\indextype{dict}\indexclass{dict}
\indexfr{clé}\indexfr{valeur}\indexfrr{dictionnaire}{valeur}\indexfrr{dictionnaire}{clé}

Les dictionnaires sont des tableaux plus souples que les listes. Une liste référence les éléments en leur donnant une position~: la liste associe à chaque élément une position entière comprise entre~0 et~$n-1$ si~$n$ est la longueur de la liste. Un dictionnaire permet d'associer à un élément autre chose qu'une position entière~: ce peut être un entier, un réel, une chaîne de caractères, un T-uple contenant des objets immuables. D'une manière générale, un dictionnaire associe à une valeur ce qu'on appelle une clé de type immuable. Cette clé permettra de retrouver la valeur associée.

L'avantage principal des dictionnaires est la recherche optimisée des clés. Par exemple, on recense les noms des employés d'une entreprise dans une liste. On souhaite ensuite savoir si une personne ayant un nom précisé à l'avance appartient à cette liste. Il faudra alors parcourir la liste jusqu'à trouver ce nom ou parcourir toute la liste si jamais celui-ci ne s'y trouve pas\footnote{voir également le paragraphe~\ref{recherche_classique_classique}, page~\pageref{recherche_classique_classique}}. Dans le cas d'un dictionnaire, cette recherche du nom sera beaucoup plus rapide à écrire et à exécuter.

\subsubsection{Définition et fonctions}
%
        \begin{xdefinition}{dictionnaire}
        Les dictionnaires sont des listes de couples. Chaque couple contient une clé et une valeur.
        Chaque valeur est indicée par sa clé. La valeur peut-être de tout type, la clé doit être
        de type immuable, ce ne peut donc être ni une liste, ni un dictionnaire. Chaque clé comme chaque valeur
        peut avoir un type différent des autres clés ou valeurs.
        \end{xdefinition}

\indexsymbole{:}\indexsymbole{\{\}}\indexsymbole{,}
Un dictionnaire apparaît comme une succession de couples d'objets comprise entre accolades et séparés par des virgules. La clé et sa valeur sont séparées par le symbole~\codes{:}. Leur création reprend le même format~:
\vspaceneg
%
\begin{verbatimx}
x = { "cle1":"valeur1", "cle2":"valeur2" }
y = { }         # crée un dictionnaire vide
z = dict ()     # crée aussi un dictionnaire vide
\end{verbatimx}
%
\vspaceneg
Les indices ne sont plus entiers mais des chaînes de caractères pour cet exemple. Pour associer la valeur à la clé "cle1", il suffit d'écrire~:
\vspaceneg
%
\begin{verbatimx}
print x ["cle1"]
\end{verbatimx}
\vspaceneg
%
%
La plupart des fonctions disponibles pour les listes sont interdites pour les dictionnaires comme la concaténation ou l'opération de multiplication~(\codes{*}). Il n'existe plus non plus d'indices entiers pour repérer les éléments, le seul repère est leur clé. La table~\ref{operation_dict} dresse la liste des opérations simples sur les dictionnaires tandis que la table~\ref{operation_dict2} dresse la liste des méthodes plus complexes.
%

        \begin{table}[ht]
        \begin{center}\begin{tabularx}{\textwidth}{|lX|} \hline
        \codes{x \; in \; d}                & vrai si \codes{x} est une des clés de \codes{d} \\  \hline
        \codes{x \; not \; in \; d}         & réciproque de la ligne précédente \\  \hline
        \codes{d[i]}                                & %\begin{minipage}{10cm}
                                                                    retourne l'élément associé à la clé \codes{i}
                                                                    %\end{minipage}  
                                                                    \\  \hline
        \codes{len(d)}                            & nombre d'éléments de \codes{d} \\ \hline
        \codes{min(d)}                            & %\begin{minipage}{10cm}
                                                                    plus petite clé 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{max(d)}                            & %\begin{minipage}{10cm}
                                                                    plus grande clé 
                                                                    %\end{minipage} 
                                                                    \\ \hline
        \codes{del \;d [i]}                 &    %\begin{minipage}{10cm}
                                                                supprime l'élément associé à la clé \codes{i}
                                                                %\end{minipage} 
                                                                \\ \hline
        \codes{list (d)}                 &    %\begin{minipage}{10cm}
                                                                retourne une liste contenant 
                                                                toutes les clés du dictionnaire \codes{d}.
                                                                %\end{minipage} 
                                                                \\ \hline
        \codes{dict (x)}                 &    %\begin{minipage}{10cm}
                                                                  convertit \codes{x} en un dictionnaire si cela est possible, 	
                                                                  \codes{d} est alors égal à \codes{ dict ( d.items () ) }
                                                                  %\end{minipage} 
                                                                  \\ \hline
        \end{tabularx}\end{center}
        \caption{ Opérations disponibles sur les dictionnaires, \codescaption{d} est un dictionnaire,
                            \codescaption{x} est quant à lui quelconque.}
        \indexfonctionbis{len}\indexfonction{min}\indexfonction{max}\indexkeyword{del}
				\indexsymbole{[]}\indexkeyword{in}\indexkeyword{not}\indexfonction{len}
        \label{operation_dict}
        \end{table}                            





        \begin{table}[ht]
        \begin{center}\begin{tabularx}{\textwidth}{|lX|} \hline
        \codes{d.copy ()}                & Retourne une copie de \codes{d}. \\  \hline
        \codes{d.has\_key (x)}    & Retourne \codes{True} si \codes{x} est une clé de \codes{d}. \\  \hline
        \codes{d.items ()}            & %\begin{minipage}{10cm}
                                                            Retourne une liste contenant tous les couples (clé, valeur)
                                                          inclus dans le dictionnaire.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.keys ()}            &     %\begin{minipage}{10cm}
                                                            Retourne une liste contenant toutes les clés du dictionnaire \codes{d}.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.values ()}        &     %\begin{minipage}{10cm}
                                                            Retourne une liste contenant 
                                                            toutes les valeurs du dictionnaire \codes{d}.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.iteritems()}    &     %\begin{minipage}{10cm}
                                                            Retourne un itérateur sur les couples (clé, valeur).
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.iterkeys ()}    &     %\begin{minipage}{10cm}
                                                            Retourne un itérateur sur les clés.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.itervalues ()}    & %\begin{minipage}{10cm}
                                                            Retourne un itérateur sur les valeurs.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.get (k[,x])}    &     %\begin{minipage}{10cm}
                                                            Retourne \codes{d [k]}, si la clé \codes{k} est manquante, alors
                                                            la valeur \codes{None} est retournée à moins 
                                                            que le paramètre optionnel \codes{x}
                                                            soit renseigné, auquel cas, ce sera ce paramètre qui sera retourné.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.clear ()}    &         %\begin{minipage}{10cm}
                                                            Supprime tous les éléments du dictionnaire.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.update (d2)}    &     %\begin{minipage}{10cm}
                                                            Le dictionnaire \codes{d} reçoit le contenu de \codes{d2}.
                                                            %\end{minipage}  
                                                            \\  \hline
        \begin{tabular}{@{}l} \codes{d.setdefault(}\\\codes{k[,x])}\end{tabular}    & %\begin{minipage}{10cm}
                                    Définit \codes{d [k]} si la clé \codes{k} existe, sinon, lui affecte \codes{x}
                                    à \codes{d[k]}.
                                                            %\end{minipage}  
                                                            \\  \hline
        \codes{d.popitem ()}    &     %\begin{minipage}{10cm}
                                                            Retourne un élément et le supprime du dictionnaire.
                                                            %\end{minipage}  
                                                            \\  \hline
        \end{tabularx}\end{center}
        \caption{ Méthodes associées aux dictionnaires, \codescaption{d}, \codescaption{d2} sont des dictionnaires,
                            \codescaption{x} est quant à lui quelconque.}
				\indexmethod{copy}\indexmethod{has\_key}\indexmethod{items}\indexmethod{keys}\indexmethod{values}
				\indexmethod{iteritems}\indexmethod{itervalues}\indexmethod{get}\indexmethod{clear}\indexmethod{update}
				\indexmethod{setdefault}\indexmethod{popitem}
        \label{operation_dict2}
        \end{table}                            


Contrairement à une liste, un dictionnaire ne peut être trié car sa structure interne est optimisée pour effectuer des recherches rapides parmi les éléments. On peut aussi se demander quel est l'intérêt de la méthode \codes{popitem} qui retourne un élément puis le supprime alors qu'il existe le mot-clé \codes{del}. Cette méthode est simplement plus rapide car elle choisit à chaque fois l'élément le moins coûteux à supprimer, surtout lorsque le dictionnaire est volumineux.

%\indexfr{itérateur}
Les itérateurs sont des objets qui permettent de parcourir rapidement un dictionnaire, ils seront décrits en détail au chapitre~\ref{chap_classe} sur les classes. Un exemple de leur utilisation est présenté dans le paragraphe suivant.



\subsubsection{Exemples}\indexfrr{dictionnaire}{exemple}
Il n'est pas possible de trier un dictionnaire. L'exemple suivant permet néanmoins d'afficher tous les éléments d'un dictionnaire selon un ordre croissant des clés. Ces exemples font appel aux paragraphes sur les boucles (voir chapitre~\ref{chap_boucle}).
\vspaceneg
%
\begin{verbatimx}
d = { "un":1, "zéro":0, "deux":2, "trois":3, "quatre":4, "cinq":5, \
       "six":6, "sept":1, "huit":8, "neuf":9, "dix":10 }
key = d.keys ()
key.sort ()
for k in key:
    print k,d [k]
\end{verbatimx}
%
\vspaceneg
L'exemple suivant montre un exemple d'utilisation des itérateurs. Il s'agit de construire un dictionnaire inversé pour lequel les valeurs seront les clés et réciproquement.\indexexemples{dictionnaire}{}
\vspaceneg
%
\begin{verbatimx}
d = { "un":1,   "zero":0, "deux":2, "trois":3, "quatre":4, "cinq":5, \
      "six":6,  "sept":1, "huit":8, "neuf":9,  "dix":10 }
       
dinv = { }                      # création d'un dictionnaire vide, on parcout
for key,value in d.items ()  :  # les éléments du dictionnaire comme si
                                # c'était une liste de 2-uple (clé,valeur)
    dinv [value] = key          # on retourne le dictionnaire

print dinv                      # affiche {0: 'zero', 1: 'un', 2: 'deux', 
                                # 3: 'trois', 4: 'quatre', 5: 'cinq', 6: 'six', 
                                # 8: 'huit', 9: 'neuf', 10: 'dix'}
\end{verbatimx}
%
\vspaceneg
Pour être plus efficace, on peut remplacer la ligne \codes{for \; key,value \; in \; d.items () :}  par~: \codes{for \; key,value \; in \; d.iteritems () :}. De cette manière, on parcourt les éléments du dictionnaire sans créer de liste intermédiaire. Il est équivalent d'utiliser l'une ou l'autre au sein d'une boucle même si le programme suivant montre une différence.
\vspaceneg
%
\begin{verbatimx}
d = { "un":1, "zero":0, "deux":2, "trois":3, "quatre":4, "cinq":5, \
       "six":6, "sept":1, "huit":8, "neuf":9, "dix":10 }
print d.items ()
print d.iteritems ()
\end{verbatimx}
\vspaceneg
Il a pour résultat~:
\vspaceneg
\begin{verbatimx}
[('trois', 3), ('sept', 1), ('neuf', 9), ('six', 6), ('zero', 0), 
 ('un', 1), ('dix', 10), ('deux', 2), ('huit', 8), ('quatre', 4), 
                                                      ('cinq', 5)]
 
<dictionary-itemiterator object at 0x0115DC40>
\end{verbatimx}
\vspaceneg

\begin{xremark}{modification d'un dictionnaire dans une boucle}
D'une manière générale, il faut éviter d'ajouter ou de supprimer un élément dans une liste ou un dictionnaire qu'on est en train de parcourir au sein d'une boucle \codes{for} ou \codes{while}.\indexkeyword{for} Cela peut marcher mais cela peut aussi aboutir à des résultats imprévisibles surtout avec l'utilisation d'itérateurs (fonction \codes{iteritems}, \codes{itervalues}, \codes{iterkeys}).\indexmethod{iteritems}\indexmethod{iterkeys}\indexmethod{itervalues} Il est préférable de terminer le parcours de la liste ou du dictionnaire puis de faire les modifications désirées une fois la boucle terminée. Dans le meilleur des cas, l'erreur suivante survient~:
\vspaceneg
\begin{verbatimx}
  File "essai.py", line 6, in <module>
    for k in d :
RuntimeError: dictionary changed size during iteration
\end{verbatimx}
\end{xremark}


\subsubsection{Copie}\label{par_dictionnaire_copie}
\indexfrr{dictionnaire}{copie}
A l'instar des listes (voir paragraphe~\ref{par_liste_copie}), les dictionnaires sont des objets et une affectation n'est pas équivalente à une copie comme le montre le programme suivant. 
\vspaceneg
%
\begin{verbatimx}
d  = {4:4,5:5,6:6}
d2 = d
print d            # affiche {4: 4, 5: 5, 6: 6}
print d2           # affiche {4: 4, 5: 5, 6: 6}
d2 [5] = "modif"
print d            # affiche {4: 4, 5: 'modif', 6: 6}
print d2           # affiche {4: 4, 5: 'modif', 6: 6}
\end{verbatimx}
\vspaceneg
%
\indexmoduleint{copy}\indexfonction{copy}
Lorsqu'on affecte une liste à une variable, celle-ci n'est pas recopiée, la liste reçoit seulement un nom de variable. L'affectation est en fait l'association d'un nom avec un objet (voir paragraphe~\ref{par_copie_objet}). Pour copier une liste, il faut utiliser la fonction \codes{copy} du module \codes{copy}.\indexexemples{copie}{}
\vspaceneg
%
\begin{verbatimx}
d  = {4:4,5:5,6:6}
import copy
d2 = copy.copy(l)
print d            # affiche {4: 4, 5: 5, 6: 6}
print d2           # affiche {4: 4, 5: 5, 6: 6}
d2 [5] = "modif"
print d            # affiche {4: 4, 5: 5, 6: 6}
print d2           # affiche {4: 4, 5: 'modif', 6: 6}
\end{verbatimx}
%
\vspaceneg
Le mot-clé \codes{is} a la même signification pour les dictionnaires que pour les listes, l'exemple du paragraphe~\ref{par_liste_copie} (page~\pageref{par_liste_copie}) est aussi valable pour les dictionnaires. Il en est de même pour la remarque concernant la fonction \codes{deepcopy}. Cette fonction recopie les listes et les dictionnaires.


\subsubsection{Clés de type modifiable}  \label{cle_dict_modificalbe_apr}\indexfrr{dictionnaire}{clé modifiable}

Ce paragraphe concerne davantage des utilisateurs avertis qui souhaitent malgré tout utiliser des clés de type modifiable. Dans l'exemple qui suit, la clé d'un dictionnaire est également un dictionnaire et cela provoque une erreur. Il en serait de même si la variable \codes{k} utilisée comme clé était une liste.
\vspaceneg
\begin{center}\begin{tabular}{@{}lr@{}}
\begin{minipage}{5.7cm}
\begin{verbatimx}
k = { 1:1}
d = { }
d [k] = 0


\end{verbatimx}
\end{minipage}
&
\begin{minipage}{7.7cm}
\begin{verbatimx}
Traceback (most recent call last):
  File "cledict.py", line 3, in <module>
    d [k] = 0
TypeError: dict objects are unhashable
\end{verbatimx}
\end{minipage}
\end{tabular}
\end{center}
%
\vspaceneg
Cela ne veut pas dire qu'il faille renoncer à utiliser un dictionnaire ou une liste comme clé. La fonction \codes{id}\indexfonctionbis{id} permet d'obtenir un entier qui identifie de manière unique tout objet. Le code suivant est parfaitement correct.
\vspaceneg
\begin{verbatimx}
k = { 1:1}
d = { }
d [id (k)] = 0
\end{verbatimx}
\vspaceneg
Toutefois, ce n'est pas parce que deux dictionnaires auront des contenus identiques que leurs identifiants retournés par la fonction \codes{id} seront égaux. C'est ce qui explique l'erreur que provoque la dernière ligne du programme suivant.
\vspaceneg\indexexemples{\codesindex{id}}{}
\begin{verbatimx}
k = {1:1}
d = { }
d [id (k)] = 0
b = k
print d [id(b)]  # affiche bien zéro
c = {1:1}
print d [id(c)]  # provoque une erreur car même si k et c ont des contenus égaux,
                 # ils sont distincts, la clé id(c) n'existe pas dans d
\end{verbatimx}
\vspaceneg
%
Il existe un cas où on peut se passer de la fonction \codes{id} mais il inclut la notion de classe définie au chapitre~\ref{chap_classe}. L'exemple suivant utilise directement l'instance \codes{k} comme clé. En affichant le dictionnaire \codes{d}, on vérifie que la clé est liée au résultat de l'instruction \codes{id(k)} même si ce n'est pas la clé.\indexexemples{\codesindex{id}}{}
\vspaceneg
%
\begin{verbatimx}
class A : pass

k = A ()
d = { }
d [k] = 0
print d                   # affiche {<__main__.A object at 0x0120DB90>: 0}
print id (k), hex(id(k))  # affiche 18930576, 0x120db90
print d [id(k)]           # provoque une erreur
\end{verbatimx}
%
\vspaceneg
La fonction \codes{hex}\indexfonction{hex} convertit un entier en notation hexadécimale. Les nombres affichés changent à chaque exécution. Pour conclure, ce dernier exemple montre comment se passer de la fonction \codes{id} dans le cas d'une clé de type dictionnaire.
\vspaceneg
%
\begin{verbatimx}
class A (dict):
    def __hash__(self):
        return id(self)
        
k = A ()
k ["t"]= 4
d = { }
d [k] = 0
print d         # affiche {{'t': 4}: 0}
\end{verbatimx}


\section{Extensions}



\subsection{Mot-clé \codes{print}, \codes{repr}, conversion en chaîne de caractères}
\indexkeyword{print}
\indexfonction{repr}
\indexfonction{str}
\indexfonction{eval}
\indexfrr{chaîne de caractères}{conversion}\indexfr{conversion}
\label{fonction_print_eval}

Le mot-clé \codes{print} est déjà apparu dans les exemples présentés ci-dessus, il permet d'afficher une ou plusieurs variables préalablement définies, séparées par des virgules. Les paragraphes qui suivent donnent quelques exemples d'utilisation. La fonction \codes{print} permet d'afficher n'importe quelle variable ou objet à l'écran, cet affichage suppose la conversion de cette variable ou objet en une chaîne de caractères. Deux fonctions permettent d'effectuer cette étape sans toutefois afficher le résultat à l'écran.

La fonction \codes{str} (voir paragraphe~\ref{fonction_str}) permet de convertir toute variable en chaîne de caractères. Il existe cependant une autre fonction \codes{repr}, qui effectue cette conversion. Dans ce cas, le résultat peut être interprété par la fonction \codes{eval} (voir paragraphe~\ref{fonction_eval}) qui se charge de la conversion inverse. Pour les types simples comme ceux présentés dans ce chapitre, ces deux fonctions retournent des résultats identiques. Pour l'exemple, \codes{x} désigne n'importe quelle variable.
%
\vspaceneg
\begin{verbatimx}
x == eval (repr(x)) # est toujours vrai (True)
x == eval (str (x)) # n'est pas toujours vrai
\end{verbatimx}
%
%
\subsection{Fonction \codes{eval}}

\indexfonction{eval}\label{fonction_eval}\label{eval_fonction_chapitre_deux}
Comme le suggère le paragraphe précédent, la fonction \codes{eval} permet d'évaluer une chaîne de caractères ou plutôt de l'interpréter comme si c'était une instruction en \python. Le petit exemple suivant permet de tester toutes les opérations de calcul possibles entre deux entiers.\indexexemples{\codesindex{eval}}{}
\vspaceneg
%
%
\begin{verbatimx}
x  = 32
y  = 9
op = "+ - * / % // & | and or << >>".split ()
for o in op :
    s = str (x) + " " + o + "  " + str (y)
    print s, " = ", eval (s)
\end{verbatimx}
%
\vspaceneg
Ceci aboutit au résultat suivant~:
\vspaceneg
%
\begin{verbatimx}
32 +  9  =  41
32 -  9  =  23
32 *  9  =  288
32 /  9  =  3
32 %  9  =  5
32 //  9  =  3
32 &  9  =  0
32 |  9  =  41
32 and  9  =  9
32 or  9  =  32
32 <<  9  =  16384
32 >>  9  =  0
\end{verbatimx}
%
Le programme va créer une chaîne de caractères pour chacune des opérations et celle-ci sera évaluée grâce à la fonction \codes{eval} comme si c'était une expression numérique. Il faut bien sûr que les variables que l'expression mentionne existent durant son évaluation. 





\subsection{Informations fournies par \python}

\indexfonction{dir}
Bien que les fonctions ne soient définies que plus tard (paragraphe~\ref{par_fonction}), il peut être intéressant de mentionner la fonction \codes{dir} qui retourne la liste de toutes les variables créées et accessibles à cet instant du programme. L'exemple suivant~:
\vspaceneg
\begin{verbatimx}
x = 3
print dir ()
\end{verbatimx}
\vspaceneg
Retourne le résultat suivant~:
\vspaceneg
\begin{verbatimx}
['__builtins__', '__doc__', '__file__', '__name__', 'x']
\end{verbatimx}
\vspaceneg
%
Certaines variables -~des chaînes des caractères~- existent déjà avant même la première instruction. Elles contiennent différentes informations concernant l'environnement dans lequel est exécuté le programme \python~:
\indexsymbole{"""}

        \begin{center}\begin{tabularx}{\textwidth}{|lX|}\hline
        \codes{\_\_builtins\_\_}     &    %\begin{minipage}{10cm}
                                                                Ce module contient tous les éléments présents dès le début d'un
                                                                programme \python, il contient entre autres 
                                                                les types présentés dans ce 
                                                                chapitre et des fonctions simples comme \codes{range}.
                                                                %\end{minipage}
                                                                \\ \hline
        \codes{\_\_doc\_\_}             &    %\begin{minipage}{10cm}
                                                                C'est une chaîne commentant le fichier, c'est une chaîne de caractères
                                                                insérée aux premières lignes
                                                                du fichiers et souvent entourée des symboles \codes{"""} 
                                                                (voir chapitre~\ref{chap_module}).
                                                                %\end{minipage}
                                                                \\ \hline
        \codes{\_\_file\_\_}             &    Contient le nom du fichier où est écrit ce programme.    \\ \hline
        \codes{\_\_name\_\_}             &    Contient le nom du module.        \\ \hline
        \end{tabularx}\end{center} 
        \indexfr{\codesindex{\_\_builtins\_\_}}\indexfr{\codesindex{\_\_doc\_\_}}\indexfr{\codesindex{\_\_file\_\_}}
        \indexfr{\codesindex{\_\_name\_\_}}

La fonction \codes{dir} est également pratique pour afficher toutes les fonctions d'un module. L'instruction \codes{dir(sys)} affiche la liste des fonctions du module \codes{sys} (voir chapitre~\ref{chap_module}).

\begin{xremark}{fonction \codes{dir}}
La fonction \codes{dir} appelée sans argument donne la liste des fonctions et variables définies à cet endroit du programme. Ce résultat peut varier selon qu'on se trouver dans une fonction, une méthode de classe ou à l'extérieur du programme. L'instruction \codes{dir([])} donne la liste des méthodes qui s'appliquent à une liste.
\end{xremark}


\indexfonctionbis{type}
De la même manière, la fonction \codes{type} retourne une information concernant le type d'une variable.\vspaceneg
%
\begin{verbatimx}
x = 3
print x, type(x)     # affiche 3 <type 'int'>
x = 3.5
print x, type(x)     # affiche 3.5 <type 'float'>
\end{verbatimx}
\vspaceneg








\subsection{Affectations multiples}
\label{affectation_multiple}

Il est possible d'effectuer en \pythons plusieurs affectations simultanément.
\vspaceneg
\indexsymbole{,}\indexsymbole{=}
\begin{verbatimx}
x = 5       # affecte 5 à x
y = 6       # affecte 6 à y
x,y = 5,6   # affecte en une seule instruction 5 à x et 6 à y
\end{verbatimx}
%
\indexfrr{affectation}{multiple}\indexfonction{divmod}
%
\vspaceneg
Cette particularité reviendra lorsque les fonctions seront décrites puisqu'il est possible qu'une fonction retourne plusieurs résultats comme la fonction \codes{divmod} illustrée par le programme suivant.
\vspaceneg
%
\indexfonction{divmod}
\begin{verbatimx}
x,y = divmod (17,5)
print x,y                          # affiche 3 2
print "17 / 5 = 5 * ", x, " + ",y  # affiche 17 / 5 = 5 *  3  +  2
\end{verbatimx}
%
%
\vspaceneg
Le langage \pythons offre la possibilité d'effectuer plusieurs affectations sur la même ligne. Dans l'exemple qui suit, le couple $\pa{5,5}$ est affecté à la variable \codes{point}, puis le couple \codes{x}, \codes{y} reçoit les deux valeurs du T-uple \codes{point}.
\vspaceneg
%
\begin{verbatimx}
x,y = point = 5,5
\end{verbatimx}
%

\subsection{Type \codes{long}}
\indextype{long}
Le type \codes{long} permet d'écrire des entiers aussi grands que l'on veut. Le langage \pythons passe automatiquement du type \codes{int} à \codes{long} lorsque le nombre considéré devient trop grand. Ils se comportent de la même manière excepté que les opérations sur des types \codes{long} sont plus longues en temps d'exécution\footnote{La différence dépend des opérations effectuées.}.

\begin{center}\begin{tabular}{@{}lr@{}}
\begin{minipage}{6.7cm}
\begin{verbatimx}
i = int(2**28)   
for k in range (0,4) :
    i *= int(2)
    print type(i),i
\end{verbatimx}
\end{minipage}
&
\begin{minipage}{6.7cm}
\begin{verbatimx}
<type 'int'> 536870912
<type 'int'> 1073741824
<type 'long'> 2147483648
<type 'long'> 4294967296
\end{verbatimx}
\end{minipage}
\end{tabular}
\end{center}




\subsection{Ensemble}
\indexclass{set}
Le langage \pythons définit également ce qu'on appelle un ensemble.\indexfrr{type}{ensemble}\indextype{set}\indextype{frozenset} Il est défini par les classes \codes{set} de type modifiable et la classe \codes{frozenset} de type immuable. Ils n'acceptent que des types identiques et offrent la plupart des opérations liées aux ensembles comme l'intersection, l'union.\indexfr{union}\indexfr{intersection} D'un usage moins fréquent, ils ne seront pas plus détaillés\footnote{La page~\httpstyle{http://docs.python.org/library/stdtypes.html\#set} décrit l'ensemble des fonctionnalités qui leur sont attachées.}.\indexexemples{\codesindex{set}}{}
\vspaceneg
\begin{verbatimx}
print set ( (1,2,3) ) & set ( (2,3,5) )  
           # construit l'intersection qui est set([2, 3])
\end{verbatimx}
\vspaceneg

%\ifnotellipse{
\vspaceneg
Ce chapitre a présenté les différents types de variables définis par le langage \pythons pour manipuler des données ainsi que les opérations possibles avec ces types de données. Le chapitre suivant va présenter les tests, les boucles et les fonctions qui permettent de réaliser la plupart des programmes informatiques.
%}















\firstpassagedo{
    \begin{thebibliography}{99}
    \input{python_cours_biblio.tex}
    \end{thebibliography}
}



\input{../../common/livre_table_end.tex}%
\input{../../common/livre_end.tex}%